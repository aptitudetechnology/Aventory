import{o as r,c as b,b as l,r as c,t as i,z as y,a as o,w as a,x as _,v as p,F as g,D as M,y as A,A as S,W as B,u as I,d as h}from"./app.c6d51eb6.js";import{_ as w}from"./plugin-vue_export-helper.21dcd24c.js";import{J as j}from"./DialogModal.15f17e82.js";import{E as q}from"./ErrorMessage.84bde280.js";import"./Modal.a8ddeb0e.js";import"./SectionTitle.6e9e4bb1.js";import"./XCircleIcon.7dffa179.js";function O(n,t){return r(),b("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})])}const V={components:{SparklesIcon:O}},z={class:"btn btn-sm btn-outline pl-2 flex items-center"};function D(n,t,u,C,d,s){const m=c("SparklesIcon");return r(),i("button",z,[l(m,{class:"w-6 h-6 stroke-current mr-2"}),y(n.$slots,"default")])}var E=w(V,[["render",D]]);const L={components:{ActionButton:E,DialogModal:j,ErrorMessage:q},props:{order:{type:Object,required:!0}},data(){return{customConvert:!1,items:[],errorMessage:"",availableItems:this.order.items}},computed:{convertText(){return this.order.is_quote?"Convert to Order":"Convert to Quote"}},methods:{convert(){if(this.customConvert&&!this.items.length){this.errorMessage="Please select items to convert.";return}this.$inertia.post(route("sales.convert",this.order.id),{items:this.items})},showCustomConvert(){this.customConvert=!0},addOrRemoveItem(n){this.isAdded(n)?this.items=this.items.filter(t=>t.id!==n.id):this.items.push(n)},isAdded(n){return this.items.find(t=>t.id===n.id)}}},N={class:"dropdown dropdown-hover dropdown-end"},T=h("Actions"),Q={tabindex:"0",class:"shadow menu dropdown-content bg-base-100 rounded-lg text-right w-52"},R={key:0},F={key:1},J=h(" Select order items to convert to order. "),P=["onSubmit"],U={class:"input-group input-group-sm"},W=o("span",{class:"label-text"},"Qty",-1),G=["disabled","onUpdate:modelValue"],H={key:0},K={key:1},X=h("Create Order");function Y(n,t,u,C,d,s){const m=c("ActionButton"),k=c("ErrorMessage"),v=c("jet-button"),x=c("dialog-modal");return r(),i(g,null,[o("div",N,[l(m,{class:"bg-white"},{default:a(()=>[T]),_:1}),o("ul",Q,[!u.order.is_quote||u.order.status=="Pending"?(r(),i("li",R,[o("a",{onClick:t[0]||(t[0]=(...e)=>s.convert&&s.convert(...e)),class:"justify-end px-4 capitalize"},_(s.convertText),1)])):p("",!0),u.order.is_quote?(r(),i("li",F,[o("a",{onClick:t[1]||(t[1]=(...e)=>s.showCustomConvert&&s.showCustomConvert(...e)),class:"justify-end px-4"},"New Order from Quote")])):p("",!0)])]),l(x,{show:d.customConvert,onClose:t[2]||(t[2]=e=>d.customConvert=!1)},{title:a(()=>[J]),content:a(()=>[o("div",null,[d.errorMessage?(r(),b(k,{key:0,title:d.errorMessage,message:d.errorMessage},null,8,["title","message"])):p("",!0),(r(!0),i(g,null,M(d.availableItems,e=>(r(),i("div",{key:e.id,class:"flex items-center py-2"},[o("span",null,_(e.size_name)+" "+_(e.product_name),1),o("form",{onSubmit:A(f=>s.addOrRemoveItem(e),["prevent"]),class:"ml-auto flex items-center"},[o("label",U,[W,S(o("input",{disabled:s.isAdded(e),type:"number",min:"0","onUpdate:modelValue":f=>e.quantity=f,class:"input input-bordered input-sm w-20"},null,8,G),[[B,e.quantity]])]),l(v,{type:"submit",class:I(["ml-2 btn-sm",s.isAdded(e)?"btn-error":""])},{default:a(()=>[s.isAdded(e)?(r(),i("span",H,"Remove")):(r(),i("span",K,"Add"))]),_:2},1032,["class"])],40,P)]))),128))])]),footer:a(()=>[l(v,{onClick:s.convert},{default:a(()=>[X]),_:1},8,["onClick"])]),_:1},8,["show"])],64)}var ne=w(L,[["render",Y]]);export{ne as default};
