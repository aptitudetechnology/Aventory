import{J as y}from"./Label.98bc58ad.js";import{J as v}from"./Button.9edbaae6.js";import{J}from"./Checkbox.28af1d52.js";import{J as N}from"./Input.3e59ac9d.js";import{S as C}from"./SelectBox.4394748c.js";import{_ as w}from"./plugin-vue_export-helper.21dcd24c.js";import{r as o,o as a,t as d,u as I,x as z,v as V,a as r,b as n,w as l,F as S,D as _,c as p,d as c}from"./app.c6d51eb6.js";import"./dom.esm.fa0fef86.js";import"./calculate-active-index.esm.611fafbc.js";import"./use-resolve-button-type.esm.4623ef0e.js";const B={components:{JetLabel:y,JetButton:v,JetCheckbox:J,JetInput:N,SelectBox:C},props:{inventory:Object,sizes:Array},data(){return{sizeData:{autosize:!1,autosizeSize:null,recentSizes:[]},autosizedNotice:{wasAutosized:!0,message:null},selectedSize:this.sizes.find(e=>e.id==this.inventory.size_id),form:this.$inertia.form({size_id:this.inventory.size_id})}},computed:{nextSize(){if(this.selectedSize.next_size_id)return this.sizes.find(e=>e.id==this.selectedSize.next_size_id)},autosizeLabel(){return this.sizeData.autosizeSize?"Autosize to "+this.sizeData.autosizeSize.name:"Autosize"}},mounted(){if(localStorage.getItem("sizeData")){try{this.sizeData=JSON.parse(localStorage.getItem("sizeData"))}catch{localStorage.removeItem("sizeData")}this.sizeData.autosize&&this.sizeData.autosizeSize&&this.inventory.id!=localStorage.lastInventoryId&&(localStorage.lastProductId==this.inventory.product_id?new Promise((e,i)=>{this.selectedSize=this.sizeData.autosizeSize,e()}).then(()=>{this.autosizedNotice={wasAutosized:!0,message:"Autosized to "+this.selectedSize.name}}):(this.sizeData.autosize=!1,this.autosizedNotice={wasAutosized:!1,message:"New Product. Size was not autosized"}))}},beforeUnmount(){localStorage.lastProductId=this.inventory.product_id},watch:{sizeData:{handler(e){localStorage.setItem("sizeData",JSON.stringify(e))},deep:!0},selectedSize(e){!this.sizeData.recentSizes.map(i=>i.id).includes(e.id)&&e&&(this.sizeData.recentSizes.length>=3&&this.sizeData.recentSizes.shift(),this.sizeData.recentSizes.push(e)),e&&(this.form.size_id=e.id,this.updateSize()),this.autosizedNotice.message=null}},methods:{assignNextSize(){this.selectedSize=this.nextSize},currentSize(e){return this.selectedSize.id==e.id},updateSize(){this.form.patch(route("inventory.update",this.inventory))}}},A={class:"py-4 grid gap-3"},L=r("h2",{class:"text-xl"},"Plant Size",-1),j={class:"flex items-center space-x-4"},P=c("Next Size Up"),U={class:"flex items-center space-x-2"},O=c("Change to: "),F={class:"flex items-center space-x-2"},E={class:"flex items-center space-x-2"};function T(e,i,f,q,t,u){const x=o("select-box"),g=o("jet-button"),D=o("jet-label"),h=o("JetButton"),b=o("JetLabel"),k=o("JetCheckbox");return a(),d("div",A,[L,t.autosizedNotice.message?(a(),d("p",{key:0,class:I([t.autosizedNotice.wasAutosized?"text-green-600":"text-red-500"])},z(t.autosizedNotice.message),3)):V("",!0),r("div",j,[n(x,{class:"w-full flex items-center space-x-2",id:"size",items:f.sizes,selectedItem:t.selectedSize,modelValue:t.selectedSize,"onUpdate:modelValue":i[0]||(i[0]=s=>t.selectedSize=s),showLabel:!1},null,8,["items","selectedItem","modelValue"]),n(g,{disabled:!u.nextSize,onClick:u.assignNextSize,class:"max-w-xs flex-shrink-0"},{default:l(()=>[P]),_:1},8,["disabled","onClick"])]),r("div",U,[n(D,{class:"text-lg"},{default:l(()=>[O]),_:1}),(a(!0),d(S,null,_(t.sizeData.recentSizes,s=>(a(),p(h,{key:s.id,disabled:this.selectedSize.id==s.id,onClick:m=>t.selectedSize=s},{default:l(()=>[c(z(s.name),1)]),_:2},1032,["disabled","onClick"]))),128))]),r("div",F,[n(b,{for:"autosize",class:"text-lg"},{default:l(()=>[c(z(u.autosizeLabel),1)]),_:1}),n(k,{checked:t.sizeData.autosize,modelValue:t.sizeData.autosize,"onUpdate:modelValue":i[1]||(i[1]=s=>t.sizeData.autosize=s)},null,8,["checked","modelValue"])]),r("div",E,[(a(!0),d(S,null,_(t.sizeData.recentSizes,s=>{var m;return a(),p(h,{key:s.id+"recent",onClick:G=>t.sizeData.autosizeSize=s,disabled:((m=t.sizeData.autosizeSize)==null?void 0:m.id)==s.id},{default:l(()=>[c(z(s.name),1)]),_:2},1032,["onClick","disabled"])}),128))])])}var ee=w(B,[["render",T]]);export{ee as default};
