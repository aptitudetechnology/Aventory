import{_ as U,aa as Q,ah as S,r as s,o as _,c as O,w as u,a as d,N as c,Q as f,U as b,L as C,b as r,J as j,M as x}from"./app.9dc34ef4.js";import{S as B}from"./SearchSelectBox.5a5b9e0a.js";import{M as D}from"./Modal.c8b704a0.js";import A from"./CreateCustomerForm.9e87da42.js";import T from"./Items.a362cc91.js";import H from"./Discounts.3af02003.js";import z from"./Totals.5b5524fa.js";import E from"./QuoteHoldInventoryCheckmark.a2d576b8.js";import{_ as l}from"./debounce.c1877602.js";import"./XCircleIcon.615c78c3.js";import"./FormSection.d0f32ab4.js";import"./ActionMessage.59b94243.js";import"./switch.esm.c16c42ce.js";import"./description.esm.f365edce.js";import"./label.esm.2a39737d.js";import"./ItemCreate.ba649588.js";import"./DialogModal.13bcfa5f.js";import"./PlusIcon.268dbb20.js";import"./ProductHoldView.e5aa2833.js";import"./TabLink.8aaa87cf.js";import"./ErrorMessage.e1cd30fd.js";import"./ProductHoldItem.5681089d.js";import"./SmallLineItem.a2a9a34f.js";import"./LoadingState.731eb4ed.js";import"./InventoryDetail.dcd1fea5.js";import"./ItemConfirmQuantity.c447e026.js";import"./ConfirmationModal.47b3bac6.js";import"./ItemLine.510dd1d2.js";import"./CheckIcon.2c0dd6d8.js";import"./LineItem.d4c51a50.js";import"./ItemEdit.5a890a78.js";import"./EditButton.8798a50f.js";import"./PencilIcon.267f42dd.js";import"./ItemDelete.06a63365.js";import"./DeleteButton.b8a3a0b8.js";import"./TrashIcon.e8c48c8a.js";import"./DiscountItem.58118300.js";import"./DiscountEdit.d1283fcf.js";import"./DiscountDelete.083c2575.js";import"./DiscountCreate.023c58ec.js";const L={components:{SearchSelectBox:B,TextAreaInput:Q,Modal:D,CreateCustomerForm:A,OrderItems:T,Discounts:H,Totals:z,QuoteHoldInventoryCheckmark:E},props:{order:{type:Object,required:!0},customers:{type:Array,required:!0},priceLevels:{type:Array,required:!0}},data(){return{creatingCustomer:!1,customerName:"",customerContacts:[],teamMembers:this.$page.props.teamMembers,orderCustomer:this.customers.find(t=>t.id===this.order.customer_id),contact:this.order.contact,teamMember:this.$page.props.teamMembers.find(t=>t.id===this.order.team_member_id),updatedOrder:this.$inertia.form({customer_id:this.order.customer_id,contact_id:this.order.contact_id,team_member_id:this.order.team_member_id,date:this.order.date,quote_expires:this.order.quote_expires,hold_inventory:this.order.hold_inventory,notes:this.order.notes})}},computed:{isQuote(){return this.order.is_quote}},watch:{"updatedOrder.customer_id":l(function(){this.updateOrder()},500),"updatedOrder.team_member_id":l(function(){this.updateOrder()},500),"updatedOrder.date":l(function(){this.updateOrder()},1e3),"updatedOrder.quote_expires":l(function(){this.updateOrder()},1e3),"updatedOrder.notes":l(function(){this.updateOrder()},1e3),orderCustomer(t){t?(this.updatedOrder.customer_id=t.id,this.customerContacts=t.contacts?t.contacts:[],this.contact=null,this.updatedOrder.is_taxable=t.is_taxable):(this.updatedOrder.customer_id=null,this.contact=null)},contact(t){t?this.updatedOrder.contact_id=t.id:this.updatedOrder.contact_id=null},teamMember(t){t?this.updatedOrder.team_member_id=t.id:this.updatedOrder.team_member_id=null}},methods:{sendQuoteChanges(){this.updatedOrder.patch(route("quotes.update",this.order.id),{errorBag:"updateOrder",preserveScroll:!0})},sendOrderChanges(){this.updatedOrder.patch(route("orders.update",this.order.id),{errorBag:"updateOrder",preserveScroll:!0})},updateOrder(){this.$nextTick(()=>{this.updatedOrder.isDirty&&!this.updatedOrder.processing&&(this.order.is_quote?this.sendQuoteChanges():this.sendOrderChanges())})},updateCustomer(t){this.orderCustomer=this.customers.find(o=>o.id==t)},addCustomer(t){this.customerName=t,this.creatingCustomer=!0},createdCustomer(t){S.Inertia.reload(),this.customers.push(t),this.updateCustomer(t.id),this.creatingCustomer=!1}}},F={class:"uppercase"},G=["disabled"],J={class:"text-lg"},P={class:"col-span-6 grid gap-6"},K={class:"grid lg:grid-cols-2 gap-x-4 gap-y-2 2xl:gap-x-20"},R={class:"col-span-1 grid xl:grid-cols-2 gap-x-4 gap-y-2"},W={class:"col-span-1 grid grid-cols-2 gap-4"},X={key:0},Y={class:"lg:col-span-2"},Z={class:""};function $(t,o,a,ee,e,m){const v=s("search-select-box"),n=s("jet-input-error"),y=s("create-customer-form"),V=s("modal"),h=s("select-box"),p=s("jet-label"),g=s("jet-input"),q=s("QuoteHoldInventoryCheckmark"),k=s("text-area-input"),M=s("order-items"),I=s("discounts"),w=s("totals"),N=s("details-section");return _(),O(N,null,{title:u(()=>[d("span",F,c(a.order.customer.name)+": "+c(a.order.type)+" #"+c(a.order.id),1),f(d("span",{class:C(["ml-4 fixed bottom-5 right-10 z-50 md:static rounded bg-white p-3 text-base"]),disabled:e.updatedOrder.processing||!e.updatedOrder.isDirty}," Saving Changes... ",8,G),[[b,e.updatedOrder.processing]])]),aside:u(()=>[d("h3",J," Grand Total: "+c(t.formatMoney(a.order.grand_total)),1)]),default:u(()=>[d("div",P,[d("div",K,[d("div",R,[d("div",null,[r(v,{labelValue:"Customer",items:a.customers,selectedItem:e.orderCustomer,onUpdate:m.updateCustomer,onAdd:m.addCustomer},null,8,["items","selectedItem","onUpdate","onAdd"]),r(n,{message:e.updatedOrder.errors.customer_id,class:"mt-2"},null,8,["message"]),r(V,{show:e.creatingCustomer,onClose:o[0]||(o[0]=i=>e.creatingCustomer=!1)},{default:u(()=>[r(y,{onCreated:m.createdCustomer,redirect:!1,customerName:e.customerName},null,8,["onCreated","customerName"])]),_:1},8,["show"])]),f(d("div",null,[r(h,{labelValue:"Customer Contact",items:e.customerContacts,modelValue:e.contact,"onUpdate:modelValue":o[1]||(o[1]=i=>e.contact=i),selectedItem:e.contact},null,8,["items","modelValue","selectedItem"]),r(n,{message:e.updatedOrder.errors.contact_id,class:"mt-2"},null,8,["message"])],512),[[b,e.orderCustomer&&e.customerContacts.length]]),d("div",null,[r(h,{labelValue:"Sales Person",items:e.teamMembers,selectedItem:e.teamMember,modelValue:e.teamMember,"onUpdate:modelValue":o[2]||(o[2]=i=>e.teamMember=i)},null,8,["items","selectedItem","modelValue"]),r(n,{message:e.updatedOrder.errors.team_member_id,class:"mt-2"},null,8,["message"])])]),d("div",W,[d("div",{class:C(["form-control",a.order.is_quote?"":"col-span-2 justify-self-end"])},[r(p,{for:"date",value:"Order Date"}),r(g,{id:"date",type:"date",class:"block w-full",modelValue:e.updatedOrder.date,"onUpdate:modelValue":o[3]||(o[3]=i=>e.updatedOrder.date=i),required:""},null,8,["modelValue"]),r(n,{message:e.updatedOrder.errors.date,class:"mt-2"},null,8,["message"])],2),m.isQuote?(_(),j("div",X,[r(p,{for:"quote_expires",value:"Expire Date"}),r(g,{id:"quote_expires",type:"date",class:"block w-full",modelValue:e.updatedOrder.quote_expires,"onUpdate:modelValue":o[4]||(o[4]=i=>e.updatedOrder.quote_expires=i),required:""},null,8,["modelValue"]),r(n,{message:e.updatedOrder.errors.quote_expires,class:"mt-2"},null,8,["message"])])):x("",!0),m.isQuote?(_(),O(q,{key:1,modelValue:e.updatedOrder.hold_inventory,"onUpdate:modelValue":o[5]||(o[5]=i=>e.updatedOrder.hold_inventory=i),onChange:m.updateOrder,errorMessage:e.updatedOrder.errors.hold_inventory},null,8,["modelValue","onChange","errorMessage"])):x("",!0)]),d("div",Y,[d("div",Z,[r(p,{for:"notes",value:"Order Notes"}),r(k,{id:"notes",type:"notes",class:"mt-1 block w-full",modelValue:e.updatedOrder.notes,"onUpdate:modelValue":o[6]||(o[6]=i=>e.updatedOrder.notes=i)},null,8,["modelValue"]),r(n,{message:e.updatedOrder.errors.notes,class:"mt-2"},null,8,["message"])])])]),r(M,{order:a.order},null,8,["order"]),r(I,{order:a.order},null,8,["order"]),r(w,{order:a.order},null,8,["order"])])]),_:1})}var Ee=U(L,[["render",$]]);export{Ee as default};
