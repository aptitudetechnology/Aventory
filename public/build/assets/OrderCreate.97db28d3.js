import{_ as j,a7 as Q,a0 as q,a2 as N,a3 as J,a4 as U,a5 as B,a9 as O,aa as D,ah as T,r as l,o as u,J as h,b as o,w as i,d as p,N as _,a as m,Q as A,U as E,L as f,M as x,c as H}from"./app.123e766a.js";import{J as F}from"./FormSection.a31e0947.js";import{S as L}from"./SearchSelectBox.9dead5af.js";import{M as P}from"./Modal.c06c0ace.js";import z from"./CreateCustomerForm.962b2546.js";import G from"./QuoteHoldInventoryCheckmark.0926329b.js";import K from"./CompanyOpenOrders.0d02eea1.js";import"./XCircleIcon.401ddebd.js";import"./ActionMessage.df590980.js";import"./switch.esm.cc9d415a.js";import"./description.esm.8bb4746d.js";import"./label.esm.25c1a873.js";import"./EmptyState.fa0384fc.js";import"./ButtonLink.76cb776b.js";import"./LoadingState.db280596.js";const R={components:{JetSectionTitle:Q,JetButton:q,JetFormSection:F,JetInput:N,JetCheckbox:J,JetInputError:U,JetLabel:B,SelectBox:O,SearchSelectBox:L,TextAreaInput:D,Modal:P,CreateCustomerForm:z,QuoteHoldInventoryCheckmark:G,CompanyOpenOrders:K},props:{customers:{type:Array,required:!0},isQuote:{type:Boolean,default:!1}},data(){return{creatingCustomer:!1,customerName:"",customerContacts:[],teamMembers:this.$page.props.teamMembers,orderCustomer:null,contact:null,teamMember:this.$page.props.teamMembers.find(t=>t.id===this.$page.props.user.id),order:this.$inertia.form({_method:"POST",date:new Date().toISOString().slice(0,-14),quote_expires:new Date(new Date().getTime()+2592e6).toISOString().slice(0,-14),hold_inventory:!1,notes:"",items:[],customer_id:null,contact_id:null,team_member_id:this.$page.props.user.id,is_taxable:!0})}},watch:{orderCustomer(t){t?(this.order.customer_id=t.id,this.customerContacts=t.contacts?t.contacts:[],this.contact=null,this.order.is_taxable=t.is_taxable):(this.order.customer_id=null,this.contact=null)},contact(t){t?this.order.contact_id=t.id:this.order.contact_id=null},teamMember(t){t?this.order.team_member_id=t.id:this.order.team_member_id=null}},methods:{createOrder(){this.isQuote?this.order.post(route("quotes.store")):this.order.post(route("orders.store"))},updateCustomer(t){this.orderCustomer=this.customers.find(s=>s.id==t)},addCustomer(t){this.customerName=t,this.creatingCustomer=!0},createdCustomer(t){T.Inertia.reload(),this.customers.push(t),this.updateCustomer(t.id),this.creatingCustomer=!1}}},W={class:"xl:flex items-start xl:space-x-6 space-y-6 xl:space-y-0"},X={class:"col-span-6 grid gap-6"},Y={class:"grid sm:grid-cols-2 lg:grid-cols-5 gap-4 2xl:gap-x-20 lg:gap-y-8"},Z={class:"col-span-1 lg:col-span-3 grid gap-4 lg:grid-cols-2"},$={class:""},ee={class:"col-span-1 lg:col-span-2 grid grid-cols-2 gap-4"},te={key:0},oe={class:"sm:col-span-2 lg:col-span-5 sm:flex"},se={class:"form-control sm:w-1/4 mb-6 sm:mb-0 sm:mt-4"},re={class:"label cursor-pointer"},le=m("span",{class:"label-text"},"Taxable",-1),me={class:"sm:w-3/4 sm:ml-4"};function ne(t,s,n,ae,e,c){const C=l("create-customer-form"),V=l("modal"),v=l("search-select-box"),a=l("jet-input-error"),g=l("select-box"),d=l("jet-label"),b=l("jet-input"),y=l("QuoteHoldInventoryCheckmark"),k=l("jet-checkbox"),w=l("text-area-input"),S=l("jet-button"),I=l("jet-form-section"),M=l("company-open-orders");return u(),h("div",W,[o(I,{onSubmitted:c.createOrder,class:"xl:w-3/4"},{title:i(()=>[p("Create "+_(n.isQuote?"Quote":"Order"),1)]),description:i(()=>[p(" Create a new customer "+_(n.isQuote?"quote":"order")+". ",1)]),form:i(()=>[m("div",X,[m("div",Y,[m("div",Z,[m("div",null,[o(V,{show:e.creatingCustomer,onClose:s[0]||(s[0]=r=>e.creatingCustomer=!1)},{default:i(()=>[o(C,{onCreated:c.createdCustomer,redirect:!1,customerName:e.customerName},null,8,["onCreated","customerName"])]),_:1},8,["show"]),o(v,{labelValue:"Customer",items:n.customers,selectedItem:e.orderCustomer,onUpdate:c.updateCustomer,onAdd:c.addCustomer},null,8,["items","selectedItem","onUpdate","onAdd"]),o(a,{message:e.order.errors.customer_id,class:"mt-2"},null,8,["message"])]),A(m("div",null,[o(g,{labelValue:"Customer Contact",items:e.customerContacts,modelValue:e.contact,"onUpdate:modelValue":s[1]||(s[1]=r=>e.contact=r),selectedItem:e.contact},null,8,["items","modelValue","selectedItem"]),o(a,{message:e.order.errors.contact_id,class:"mt-2"},null,8,["message"])],512),[[E,e.orderCustomer&&e.customerContacts.length]]),m("div",$,[o(g,{labelValue:"Sales Person",items:e.teamMembers,selectedItem:e.teamMember,modelValue:e.teamMember,"onUpdate:modelValue":s[2]||(s[2]=r=>e.teamMember=r)},null,8,["items","selectedItem","modelValue"]),o(a,{message:e.order.errors.team_member_id,class:"mt-2"},null,8,["message"])])]),m("div",ee,[m("div",{class:f(n.isQuote?"":"col-span-2 justify-self-end")},[o(d,{for:"date",value:"Date"}),o(b,{id:"date",type:"date",class:"block w-full",modelValue:e.order.date,"onUpdate:modelValue":s[3]||(s[3]=r=>e.order.date=r),required:""},null,8,["modelValue"]),o(a,{message:e.order.errors.date,class:"mt-2"},null,8,["message"])],2),n.isQuote?(u(),h("div",te,[o(d,{for:"quote_expires",value:"Expire Date"}),o(b,{id:"quote_expires",type:"date",class:"block w-full",modelValue:e.order.quote_expires,"onUpdate:modelValue":s[4]||(s[4]=r=>e.order.quote_expires=r),required:""},null,8,["modelValue"]),o(a,{message:e.order.errors.quote_expires,class:"mt-2"},null,8,["message"])])):x("",!0),n.isQuote?(u(),H(y,{key:1,modelValue:e.order.hold_inventory,"onUpdate:modelValue":s[5]||(s[5]=r=>e.order.hold_inventory=r),errorMessage:e.order.errors.hold_inventory},null,8,["modelValue","errorMessage"])):x("",!0)]),m("div",oe,[m("div",se,[m("label",re,[le,o(k,{class:"mr-2",checked:e.order.is_taxable,modelValue:e.order.is_taxable,"onUpdate:modelValue":s[6]||(s[6]=r=>e.order.is_taxable=r)},null,8,["checked","modelValue"])])]),m("div",me,[o(d,{for:"notes",value:"Notes"}),o(w,{id:"notes",type:"notes",class:"block w-full",modelValue:e.order.notes,"onUpdate:modelValue":s[7]||(s[7]=r=>e.order.notes=r)},null,8,["modelValue"]),o(a,{message:e.order.errors.notes,class:"mt-2"},null,8,["message"])])])])])]),actions:i(()=>[o(S,{type:"submit",class:f({"opacity-25":e.order.processing}),disabled:e.order.processing},{default:i(()=>[p("New "+_(n.isQuote?"quote":"order"),1)]),_:1},8,["class","disabled"])]),_:1},8,["onSubmitted"]),o(M,{customer:e.orderCustomer,class:"xl:w-1/4"},null,8,["customer"])])}var ke=j(R,[["render",ne]]);export{ke as default};
