import{T as S}from"./TextAreaInput.8e8fc994.js";import{S as U}from"./SearchSelectBox.235a8bdb.js";import{M as j}from"./Modal.a8ddeb0e.js";import B from"./CreateCustomerForm.5a2c4bb2.js";import Q from"./Items.a9e9629a.js";import D from"./Discounts.689237ec.js";import A from"./Totals.610f013f.js";import T from"./QuoteHoldInventoryCheckmark.02cd74cd.js";import{R as H,r as s,o as _,c as O,w as u,a as d,x as p,A as f,B as b,u as C,b as r,t as z,v as x}from"./app.c6d51eb6.js";import{_ as l}from"./debounce.99af33cc.js";import{_ as E}from"./plugin-vue_export-helper.21dcd24c.js";import"./SelectBox.4394748c.js";import"./dom.esm.fa0fef86.js";import"./calculate-active-index.esm.611fafbc.js";import"./use-resolve-button-type.esm.4623ef0e.js";import"./XCircleIcon.7dffa179.js";import"./Input.3e59ac9d.js";import"./Label.98bc58ad.js";import"./Button.9edbaae6.js";import"./FormSection.532e715f.js";import"./SectionTitle.6e9e4bb1.js";import"./InputError.871a3d35.js";import"./ActionMessage.beea7ba5.js";import"./SecondaryButton.d03b45d1.js";import"./switch.esm.341fd662.js";import"./description.esm.62a21e39.js";import"./label.esm.45c99648.js";import"./Checkbox.28af1d52.js";import"./ItemCreate.d8161947.js";import"./DialogModal.15f17e82.js";import"./PlusIcon.1e874ef7.js";import"./ProductHoldView.06529d9f.js";import"./TabLink.ac542be0.js";import"./ErrorMessage.84bde280.js";import"./ProductHoldItem.a781dc4b.js";import"./SmallLineItem.10e1a703.js";import"./LoadingState.36d08ac8.js";import"./InventoryDetail.a5000e5b.js";import"./ItemConfirmQuantity.f2cbcb3d.js";import"./ConfirmationModal.08e30afa.js";import"./ItemLine.67c19d2d.js";import"./CheckIcon.5100d17a.js";import"./LineItem.d4ad7e1b.js";import"./ItemEdit.c5316b39.js";import"./EditButton.a53f5f9d.js";import"./PencilIcon.a5057f93.js";import"./MoneyInput.097a70e6.js";import"./ItemDelete.5f7f8b11.js";import"./DangerButton.21c54749.js";import"./DeleteButton.6676eeed.js";import"./TrashIcon.080e1fe7.js";import"./DiscountItem.7d77e232.js";import"./DiscountEdit.a38ccde7.js";import"./DiscountDelete.a5f99658.js";import"./DiscountCreate.b67ec604.js";const F={components:{SearchSelectBox:U,TextAreaInput:S,Modal:j,CreateCustomerForm:B,OrderItems:Q,Discounts:D,Totals:A,QuoteHoldInventoryCheckmark:T},props:{order:{type:Object,required:!0},customers:{type:Array,required:!0},priceLevels:{type:Array,required:!0}},data(){return{creatingCustomer:!1,customerName:"",customerContacts:[],teamMembers:this.$page.props.teamMembers,orderCustomer:this.customers.find(t=>t.id===this.order.customer_id),contact:this.order.contact,teamMember:this.$page.props.teamMembers.find(t=>t.id===this.order.team_member_id),updatedOrder:this.$inertia.form({customer_id:this.order.customer_id,contact_id:this.order.contact_id,team_member_id:this.order.team_member_id,date:this.order.date,quote_expires:this.order.quote_expires,hold_inventory:this.order.hold_inventory,notes:this.order.notes})}},computed:{isQuote(){return this.order.is_quote}},watch:{"updatedOrder.customer_id":l(function(){this.updateOrder()},500),"updatedOrder.team_member_id":l(function(){this.updateOrder()},500),"updatedOrder.date":l(function(){this.updateOrder()},1e3),"updatedOrder.quote_expires":l(function(){this.updateOrder()},1e3),"updatedOrder.notes":l(function(){this.updateOrder()},1e3),orderCustomer(t){t?(this.updatedOrder.customer_id=t.id,this.customerContacts=t.contacts?t.contacts:[],this.contact=null,this.updatedOrder.is_taxable=t.is_taxable):(this.updatedOrder.customer_id=null,this.contact=null)},contact(t){t?this.updatedOrder.contact_id=t.id:this.updatedOrder.contact_id=null},teamMember(t){t?this.updatedOrder.team_member_id=t.id:this.updatedOrder.team_member_id=null}},methods:{sendQuoteChanges(){this.updatedOrder.patch(route("quotes.update",this.order.id),{errorBag:"updateOrder",preserveScroll:!0})},sendOrderChanges(){this.updatedOrder.patch(route("orders.update",this.order.id),{errorBag:"updateOrder",preserveScroll:!0})},updateOrder(){this.$nextTick(()=>{this.updatedOrder.isDirty&&!this.updatedOrder.processing&&(this.order.is_quote?this.sendQuoteChanges():this.sendOrderChanges())})},updateCustomer(t){this.orderCustomer=this.customers.find(o=>o.id==t)},addCustomer(t){this.customerName=t,this.creatingCustomer=!0},createdCustomer(t){H.Inertia.reload(),this.customers.push(t),this.updateCustomer(t.id),this.creatingCustomer=!1}}},G={class:"uppercase"},L=["disabled"],P={class:"text-lg"},R={class:"col-span-6 grid gap-6"},J={class:"grid lg:grid-cols-2 gap-x-4 gap-y-2 2xl:gap-x-20"},K={class:"col-span-1 grid xl:grid-cols-2 gap-x-4 gap-y-2"},W={class:"col-span-1 grid grid-cols-2 gap-4"},X={key:0},Y={class:"lg:col-span-2"},Z={class:""};function $(t,o,m,ee,e,a){const v=s("search-select-box"),n=s("jet-input-error"),y=s("create-customer-form"),V=s("modal"),h=s("select-box"),c=s("jet-label"),g=s("jet-input"),q=s("QuoteHoldInventoryCheckmark"),k=s("text-area-input"),M=s("order-items"),I=s("discounts"),w=s("totals"),N=s("details-section");return _(),O(N,null,{title:u(()=>[d("span",G,p(m.order.customer.name)+": "+p(m.order.type)+" #"+p(m.order.id),1),f(d("span",{class:C(["ml-4 fixed bottom-5 right-10 z-50 md:static rounded bg-white p-3 text-base"]),disabled:e.updatedOrder.processing||!e.updatedOrder.isDirty}," Saving Changes... ",8,L),[[b,e.updatedOrder.processing]])]),aside:u(()=>[d("h3",P," Grand Total: "+p(t.formatMoney(m.order.grand_total)),1)]),default:u(()=>[d("div",R,[d("div",J,[d("div",K,[d("div",null,[r(v,{labelValue:"Customer",items:m.customers,selectedItem:e.orderCustomer,onUpdate:a.updateCustomer,onAdd:a.addCustomer},null,8,["items","selectedItem","onUpdate","onAdd"]),r(n,{message:e.updatedOrder.errors.customer_id,class:"mt-2"},null,8,["message"]),r(V,{show:e.creatingCustomer,onClose:o[0]||(o[0]=i=>e.creatingCustomer=!1)},{default:u(()=>[r(y,{onCreated:a.createdCustomer,redirect:!1,customerName:e.customerName},null,8,["onCreated","customerName"])]),_:1},8,["show"])]),f(d("div",null,[r(h,{labelValue:"Customer Contact",items:e.customerContacts,modelValue:e.contact,"onUpdate:modelValue":o[1]||(o[1]=i=>e.contact=i),selectedItem:e.contact},null,8,["items","modelValue","selectedItem"]),r(n,{message:e.updatedOrder.errors.contact_id,class:"mt-2"},null,8,["message"])],512),[[b,e.orderCustomer&&e.customerContacts.length]]),d("div",null,[r(h,{labelValue:"Sales Person",items:e.teamMembers,selectedItem:e.teamMember,modelValue:e.teamMember,"onUpdate:modelValue":o[2]||(o[2]=i=>e.teamMember=i)},null,8,["items","selectedItem","modelValue"]),r(n,{message:e.updatedOrder.errors.team_member_id,class:"mt-2"},null,8,["message"])])]),d("div",W,[d("div",{class:C(["form-control",m.order.is_quote?"":"col-span-2 justify-self-end"])},[r(c,{for:"date",value:"Order Date"}),r(g,{id:"date",type:"date",class:"block w-full",modelValue:e.updatedOrder.date,"onUpdate:modelValue":o[3]||(o[3]=i=>e.updatedOrder.date=i),required:""},null,8,["modelValue"]),r(n,{message:e.updatedOrder.errors.date,class:"mt-2"},null,8,["message"])],2),a.isQuote?(_(),z("div",X,[r(c,{for:"quote_expires",value:"Expire Date"}),r(g,{id:"quote_expires",type:"date",class:"block w-full",modelValue:e.updatedOrder.quote_expires,"onUpdate:modelValue":o[4]||(o[4]=i=>e.updatedOrder.quote_expires=i),required:""},null,8,["modelValue"]),r(n,{message:e.updatedOrder.errors.quote_expires,class:"mt-2"},null,8,["message"])])):x("",!0),a.isQuote?(_(),O(q,{key:1,modelValue:e.updatedOrder.hold_inventory,"onUpdate:modelValue":o[5]||(o[5]=i=>e.updatedOrder.hold_inventory=i),onChange:a.updateOrder,errorMessage:e.updatedOrder.errors.hold_inventory},null,8,["modelValue","onChange","errorMessage"])):x("",!0)]),d("div",Y,[d("div",Z,[r(c,{for:"notes",value:"Order Notes"}),r(k,{id:"notes",type:"notes",class:"mt-1 block w-full",modelValue:e.updatedOrder.notes,"onUpdate:modelValue":o[6]||(o[6]=i=>e.updatedOrder.notes=i)},null,8,["modelValue"]),r(n,{message:e.updatedOrder.errors.notes,class:"mt-2"},null,8,["message"])])])]),r(M,{order:m.order},null,8,["order"]),r(I,{order:m.order},null,8,["order"]),r(w,{order:m.order},null,8,["order"])])]),_:1})}var rt=E(F,[["render",$]]);export{rt as default};
