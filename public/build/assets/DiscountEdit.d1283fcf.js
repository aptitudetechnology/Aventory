import{J as V}from"./DialogModal.13bcfa5f.js";import j from"./DiscountDelete.083c2575.js";import{_ as x,r as n,o as k,J as C,b as t,w as i,a as c,O as S,a8 as U,Q as l,U as p,L as B,d}from"./app.9dc34ef4.js";import"./Modal.c8b704a0.js";import"./ConfirmationModal.47b3bac6.js";import"./DeleteButton.b8a3a0b8.js";import"./TrashIcon.e8c48c8a.js";const P={props:{discount:Object,show:Boolean},components:{JetDialogModal:V,DiscountDelete:j},data(){return{editingDiscount:this.show,updatedDiscount:this.$inertia.form({_method:"POST",description:this.discount.description,discount_percentage:this.discount.discount_percentage,discount_amount:this.discount.discount_amount,is_percentage:!!this.discount.discount_percentage})}},watch:{show(){this.editingDiscount=this.show},"updatedDiscount.is_percentage":function(_){_?this.updatedDiscount.discount_amount=null:this.updatedDiscount.discount_percentage=null}},methods:{createDiscount(){this.updatedDiscount.patch(route("sales.discounts.update",[this.discount.order_id,this.discount]),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{this.close()}})},close(){this.$emit("close"),this.editingDiscount=!1}}},E=d("Edit Discount"),J={class:"grid grid-cols-6 gap-4"},M={class:"grid md:col-span-3"},N=d("Description"),O={class:"grid md:col-span-2"},K=d("Percentage Discount?"),T=d("Percentage"),q={class:"grid"},z=d("Percentage %"),A={class:"grid"},I=d("Discount Amount"),L={class:"space-y-4 sm:space-y-0 sm:flex sm:justify-between items-center w-full"},Q=d("Cancel"),W={class:"sm:flex items-center space-y-4 sm:space-y-0"},F=d("Save Discount");function G(_,s,m,H,e,u){const a=n("jet-label"),g=n("text-area-input"),r=n("jet-input-error"),h=n("jet-checkbox"),D=n("percentage-input"),f=n("money-input"),b=n("jet-secondary-button"),v=n("discount-delete"),w=n("jet-button"),y=n("jet-dialog-modal");return k(),C("div",null,[t(y,{maxWidth:"3xl",show:e.editingDiscount,onClose:u.close},{title:i(()=>[E]),content:i(()=>[c("div",J,[c("form",{onSubmit:s[4]||(s[4]=S((...o)=>u.createDiscount&&u.createDiscount(...o),["prevent"])),onKeydown:s[5]||(s[5]=U((...o)=>u.createDiscount&&u.createDiscount(...o),["enter"])),class:"col-span-6 grid gap-4 md:grid-cols-5 items-start"},[c("div",M,[t(a,{for:"description"},{default:i(()=>[N]),_:1}),t(g,{required:"",modelValue:e.updatedDiscount.description,"onUpdate:modelValue":s[0]||(s[0]=o=>e.updatedDiscount.description=o),id:"description"},null,8,["modelValue"]),t(r,{message:e.updatedDiscount.errors.description},null,8,["message"])]),c("div",O,[t(a,null,{default:i(()=>[K,t(h,{modelValue:e.updatedDiscount.is_percentage,"onUpdate:modelValue":s[1]||(s[1]=o=>e.updatedDiscount.is_percentage=o),checked:e.updatedDiscount.is_percentage,class:"ml-2"},{default:i(()=>[T]),_:1},8,["modelValue","checked"])]),_:1}),l(c("div",q,[t(a,{for:"percentage"},{default:i(()=>[z]),_:1}),t(D,{id:"percentage",modelValue:e.updatedDiscount.discount_percentage,"onUpdate:modelValue":s[2]||(s[2]=o=>e.updatedDiscount.discount_percentage=o)},null,8,["modelValue"]),l(t(r,{message:"Make sure to update the discount description if you change this."},null,512),[[p,e.updatedDiscount.isDirty&&e.updatedDiscount.is_percentage]]),t(r,{message:e.updatedDiscount.errors.discount_percentage},null,8,["message"])],512),[[p,e.updatedDiscount.is_percentage]]),l(c("div",A,[t(a,{for:"amount"},{default:i(()=>[I]),_:1}),t(f,{id:"amount",modelValue:e.updatedDiscount.discount_amount,"onUpdate:modelValue":s[3]||(s[3]=o=>e.updatedDiscount.discount_amount=o)},null,8,["modelValue"])],512),[[p,!e.updatedDiscount.is_percentage]])])],32)])]),footer:i(()=>[c("div",L,[t(b,{type:"button",onClick:u.close},{default:i(()=>[Q]),_:1},8,["onClick"]),c("div",W,[t(v,{class:"sm:mr-2 block",discount:m.discount},null,8,["discount"]),t(w,{type:"submit",onClick:u.createDiscount,class:B({"opacity-25":e.updatedDiscount.processing}),disabled:e.updatedDiscount.processing},{default:i(()=>[F]),_:1},8,["onClick","class","disabled"])])])]),_:1},8,["show","onClose"])])}var se=x(P,[["render",G]]);export{se as default};
