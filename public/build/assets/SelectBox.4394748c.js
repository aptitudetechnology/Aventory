import{f as E,g as S,m as I,p as G,L as W,q as z,h as J,s as X,e as Y,n as T,i as Z,o as C,c as $,b as k,r as B,w as D,a as V,x as j,v as q,t as A,D as ee,u as U,F as te,C as ne}from"./app.c6d51eb6.js";import{_ as ae}from"./plugin-vue_export-helper.21dcd24c.js";import{m as N,r as P,o as oe,a as K,d as h,F as Q,u as F,K as b}from"./dom.esm.fa0fef86.js";import{c as le,F as g,u as ie,b as re,S as M,a as se}from"./calculate-active-index.esm.611fafbc.js";import{u as ue}from"./use-resolve-button-type.esm.4623ef0e.js";var v;(function(s){s[s.Open=0]="Open",s[s.Closed=1]="Closed"})(v||(v={}));function de(s){requestAnimationFrame(function(){return requestAnimationFrame(s)})}var H=Symbol("ListboxContext");function R(s){var e=Z(H,null);if(e===null){var l=new Error("<"+s+" /> is missing a parent <Listbox /> component.");throw Error.captureStackTrace&&Error.captureStackTrace(l,R),l}return e}var ce=E({name:"Listbox",emits:{"update:modelValue":function(e){return!0}},props:{as:{type:[Object,String],default:"template"},disabled:{type:[Boolean],default:!1},horizontal:{type:[Boolean],default:!1},modelValue:{type:[Object,String,Number,Boolean]}},setup:function(e,l){var r=l.slots,a=l.attrs,t=l.emit,o=S(v.Closed),n=S(null),f=S(null),u=S(null),d=S([]),O=S(""),m=S(null),_=I(function(){return e.modelValue}),c={listboxState:o,value:_,orientation:I(function(){return e.horizontal?"horizontal":"vertical"}),labelRef:n,buttonRef:f,optionsRef:u,disabled:I(function(){return e.disabled}),options:d,searchQuery:O,activeOptionIndex:m,closeListbox:function(){e.disabled||o.value!==v.Closed&&(o.value=v.Closed,m.value=null)},openListbox:function(){e.disabled||o.value!==v.Open&&(o.value=v.Open)},goToOption:function(p,x){if(!e.disabled&&o.value!==v.Closed){var y=le(p===g.Specific?{focus:g.Specific,id:x}:{focus:p},{resolveItems:function(){return d.value},resolveActiveIndex:function(){return m.value},resolveId:function(w){return w.id},resolveDisabled:function(w){return w.dataRef.disabled}});O.value===""&&m.value===y||(O.value="",m.value=y)}},search:function(p){if(!e.disabled&&o.value!==v.Closed){O.value+=p.toLowerCase();var x=d.value.findIndex(function(y){return!y.dataRef.disabled&&y.dataRef.textValue.startsWith(O.value)});x===-1||x===m.value||(m.value=x)}},clearSearch:function(){e.disabled||o.value!==v.Closed&&O.value!==""&&(O.value="")},registerOption:function(p,x){d.value.push({id:p,dataRef:x})},unregisterOption:function(p){var x=d.value.slice(),y=m.value!==null?x[m.value]:null,L=x.findIndex(function(w){return w.id===p});L!==-1&&x.splice(L,1),d.value=x,m.value=function(){return L===m.value||y===null?null:x.indexOf(y)}()},select:function(p){e.disabled||t("update:modelValue",p)}};return ie("mousedown",function(i){var p,x,y,L=i.target,w=document.activeElement;o.value===v.Open&&((p=h(f))!=null&&p.contains(L)||((x=h(u))!=null&&x.contains(L)||c.closeListbox(),!(w!==document.body&&(w==null?void 0:w.contains(L)))&&(i.defaultPrevented||(y=h(f))==null||y.focus({preventScroll:!0}))))}),G(H,c),re(I(function(){var i;return N(o.value,(i={},i[v.Open]=M.Open,i[v.Closed]=M.Closed,i))})),function(){var i={open:o.value===v.Open,disabled:e.disabled};return P({props:oe(e,["modelValue","onUpdate:modelValue","disabled","horizontal"]),slot:i,slots:r,attrs:a,name:"Listbox"})}}}),ve=E({name:"ListboxLabel",props:{as:{type:[Object,String],default:"label"}},render:function(){var e=R("ListboxLabel"),l={open:e.listboxState.value===v.Open,disabled:e.disabled.value},r={id:this.id,ref:"el",onClick:this.handleClick};return P({props:K({},this.$props,r),slot:l,attrs:this.$attrs,slots:this.$slots,name:"ListboxLabel"})},setup:function(){var e=R("ListboxLabel"),l="headlessui-listbox-label-"+F();return{id:l,el:e.labelRef,handleClick:function(){var a;(a=h(e.buttonRef))==null||a.focus({preventScroll:!0})}}}}),pe=E({name:"ListboxButton",props:{as:{type:[Object,String],default:"button"}},render:function(){var e,l,r=R("ListboxButton"),a={open:r.listboxState.value===v.Open,disabled:r.disabled.value},t={ref:"el",id:this.id,type:this.type,"aria-haspopup":!0,"aria-controls":(e=h(r.optionsRef))==null?void 0:e.id,"aria-expanded":r.disabled.value?void 0:r.listboxState.value===v.Open,"aria-labelledby":r.labelRef.value?[(l=h(r.labelRef))==null?void 0:l.id,this.id].join(" "):void 0,disabled:r.disabled.value===!0?!0:void 0,onKeydown:this.handleKeyDown,onKeyup:this.handleKeyUp,onClick:this.handleClick};return P({props:K({},this.$props,t),slot:a,attrs:this.$attrs,slots:this.$slots,name:"ListboxButton"})},setup:function(e,l){var r=l.attrs,a=R("ListboxButton"),t="headlessui-listbox-button-"+F();function o(u){switch(u.key){case b.Space:case b.Enter:case b.ArrowDown:u.preventDefault(),a.openListbox(),T(function(){var d;(d=h(a.optionsRef))==null||d.focus({preventScroll:!0}),a.value.value||a.goToOption(g.First)});break;case b.ArrowUp:u.preventDefault(),a.openListbox(),T(function(){var d;(d=h(a.optionsRef))==null||d.focus({preventScroll:!0}),a.value.value||a.goToOption(g.Last)});break}}function n(u){switch(u.key){case b.Space:u.preventDefault();break}}function f(u){a.disabled.value||(a.listboxState.value===v.Open?(a.closeListbox(),T(function(){var d;return(d=h(a.buttonRef))==null?void 0:d.focus({preventScroll:!0})})):(u.preventDefault(),a.openListbox(),de(function(){var d;return(d=h(a.optionsRef))==null?void 0:d.focus({preventScroll:!0})})))}return{id:t,el:a.buttonRef,type:ue(I(function(){return{as:e.as,type:r.type}}),a.buttonRef),handleKeyDown:o,handleKeyUp:n,handleClick:f}}}),fe=E({name:"ListboxOptions",props:{as:{type:[Object,String],default:"ul"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0}},render:function(){var e,l,r,a,t=R("ListboxOptions"),o={open:t.listboxState.value===v.Open},n={"aria-activedescendant":t.activeOptionIndex.value===null||(e=t.options.value[t.activeOptionIndex.value])==null?void 0:e.id,"aria-labelledby":(l=(r=h(t.labelRef))==null?void 0:r.id)!=null?l:(a=h(t.buttonRef))==null?void 0:a.id,"aria-orientation":t.orientation.value,id:this.id,onKeydown:this.handleKeyDown,role:"listbox",tabIndex:0,ref:"el"},f=this.$props;return P({props:K({},f,n),slot:o,attrs:this.$attrs,slots:this.$slots,features:Q.RenderStrategy|Q.Static,visible:this.visible,name:"ListboxOptions"})},setup:function(){var e=R("ListboxOptions"),l="headlessui-listbox-options-"+F(),r=S(null);function a(n){switch(r.value&&clearTimeout(r.value),n.key){case b.Space:if(e.searchQuery.value!=="")return n.preventDefault(),n.stopPropagation(),e.search(n.key);case b.Enter:if(n.preventDefault(),n.stopPropagation(),e.activeOptionIndex.value!==null){var f=e.options.value[e.activeOptionIndex.value].dataRef;e.select(f.value)}e.closeListbox(),T(function(){var u;return(u=h(e.buttonRef))==null?void 0:u.focus({preventScroll:!0})});break;case N(e.orientation.value,{vertical:b.ArrowDown,horizontal:b.ArrowRight}):return n.preventDefault(),n.stopPropagation(),e.goToOption(g.Next);case N(e.orientation.value,{vertical:b.ArrowUp,horizontal:b.ArrowLeft}):return n.preventDefault(),n.stopPropagation(),e.goToOption(g.Previous);case b.Home:case b.PageUp:return n.preventDefault(),n.stopPropagation(),e.goToOption(g.First);case b.End:case b.PageDown:return n.preventDefault(),n.stopPropagation(),e.goToOption(g.Last);case b.Escape:n.preventDefault(),n.stopPropagation(),e.closeListbox(),T(function(){var u;return(u=h(e.buttonRef))==null?void 0:u.focus({preventScroll:!0})});break;case b.Tab:n.preventDefault(),n.stopPropagation();break;default:n.key.length===1&&(e.search(n.key),r.value=setTimeout(function(){return e.clearSearch()},350));break}}var t=se(),o=I(function(){return t!==null?t.value===M.Open:e.listboxState.value===v.Open});return{id:l,el:e.optionsRef,handleKeyDown:a,visible:o}}}),be=E({name:"ListboxOption",props:{as:{type:[Object,String],default:"li"},value:{type:[Object,String,Number,Boolean]},disabled:{type:Boolean,default:!1}},setup:function(e,l){var r=l.slots,a=l.attrs,t=R("ListboxOption"),o="headlessui-listbox-option-"+F(),n=I(function(){return t.activeOptionIndex.value!==null?t.options.value[t.activeOptionIndex.value].id===o:!1}),f=I(function(){return W(t.value.value)===W(e.value)}),u=S({disabled:e.disabled,value:e.value,textValue:""});z(function(){var c,i,p=(c=document.getElementById(o))==null||(i=c.textContent)==null?void 0:i.toLowerCase().trim();p!==void 0&&(u.value.textValue=p)}),z(function(){return t.registerOption(o,u)}),J(function(){return t.unregisterOption(o)}),z(function(){X([t.listboxState,f],function(){var c;t.listboxState.value===v.Open&&(!f.value||(t.goToOption(g.Specific,o),(c=document.getElementById(o))==null||c.focus==null||c.focus()))},{immediate:!0})}),Y(function(){t.listboxState.value===v.Open&&(!n.value||T(function(){var c;return(c=document.getElementById(o))==null||c.scrollIntoView==null?void 0:c.scrollIntoView({block:"nearest"})}))});function d(c){if(e.disabled)return c.preventDefault();t.select(e.value),t.closeListbox(),T(function(){var i;return(i=h(t.buttonRef))==null?void 0:i.focus({preventScroll:!0})})}function O(){if(e.disabled)return t.goToOption(g.Nothing);t.goToOption(g.Specific,o)}function m(){e.disabled||n.value||t.goToOption(g.Specific,o)}function _(){e.disabled||!n.value||t.goToOption(g.Nothing)}return function(){var c=e.disabled,i={active:n.value,selected:f.value,disabled:c},p={id:o,role:"option",tabIndex:c===!0?void 0:-1,"aria-disabled":c===!0?!0:void 0,"aria-selected":f.value===!0?f.value:void 0,disabled:void 0,onClick:d,onFocus:O,onPointermove:m,onMousemove:m,onPointerleave:_,onMouseleave:_};return P({props:K({},e,p),slot:i,attrs:a,slots:r,name:"ListboxOption"})}}});function me(s,e){return C(),$("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[k("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"})])}function xe(s,e){return C(),$("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[k("path",{"fill-rule":"evenodd",d:"M10 3a1 1 0 01.707.293l3 3a1 1 0 01-1.414 1.414L10 5.414 7.707 7.707a1 1 0 01-1.414-1.414l3-3A1 1 0 0110 3zm-3.707 9.293a1 1 0 011.414 0L10 14.586l2.293-2.293a1 1 0 011.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z","clip-rule":"evenodd"})])}const he={components:{Listbox:ce,ListboxButton:pe,ListboxLabel:ve,ListboxOption:be,ListboxOptions:fe,CheckIcon:me,SelectorIcon:xe},props:{items:Array,selectedItem:Object|Boolean,labelValue:{type:String,default:"Select Option"},showLabel:{type:Boolean,default:!0},nameValue:{type:String,default:"name"}},data:function(){return{selected:this.selectedItem}},watch:{selectedItem(){this.selected=this.selectedItem}}},ge={class:"label-text"},Oe={class:"relative w-full"},ye={key:0},Le={key:1},_e={class:"absolute inset-y-0 right-0 flex items-center pr-2 pointer-events-none"},we=V("li",{class:"text-gray-900 cursor-default select-none relative py-2 pl-3 pr-9"},[V("span",{class:"font-normal block truncate"}," Clear selected ")],-1);function Se(s,e,l,r,a,t){const o=B("ListboxLabel"),n=B("SelectorIcon"),f=B("ListboxButton"),u=B("ListboxOption"),d=B("CheckIcon"),O=B("ListboxOptions"),m=B("Listbox");return C(),$(m,{as:"div",class:"form-control",modelValue:s.selected,"onUpdate:modelValue":e[0]||(e[0]=_=>s.selected=_)},{default:D(()=>[l.showLabel?(C(),$(o,{key:0,class:"label"},{default:D(()=>[V("span",ge,j(l.labelValue),1)]),_:1})):q("",!0),V("div",Oe,[k(f,{class:"input input-bordered w-full text-left"},{default:D(()=>[s.selected?(C(),A("span",ye,j(s.selected[l.nameValue]),1)):(C(),A("span",Le,"Select")),V("span",_e,[k(n,{class:"h-5 w-5 text-gray-400","aria-hidden":"true"})])]),_:1}),k(ne,{"leave-active-class":"transition ease-in duration-100","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:D(()=>[k(O,{class:"absolute z-10 mt-1 w-full bg-white shadow-lg max-h-60 rounded-md py-1 text-base ring-1 ring-black ring-opacity-5 overflow-auto focus:outline-none sm:text-sm"},{default:D(()=>[k(u,{as:"template"},{default:D(()=>[we]),_:1}),(C(!0),A(te,null,ee(l.items,_=>(C(),$(u,{as:"template",key:_.id,value:_},{default:D(({active:c,selected:i})=>[V("li",{class:U([c?"text-white bg-gray-600":"text-gray-900","cursor-default select-none relative py-2 pl-3 pr-9"])},[V("span",{class:U([i?"font-semibold":"font-normal","block truncate"])},j(_[l.nameValue]),3),i?(C(),A("span",{key:0,class:U([c?"text-white":"text-gray-600","absolute inset-y-0 right-0 flex items-center pr-4"])},[k(d,{class:"h-5 w-5","aria-hidden":"true"})],2)):q("",!0)],2)]),_:2},1032,["value"]))),128))]),_:1})]),_:1})])]),_:1},8,["modelValue"])}var De=ae(he,[["render",Se]]);export{De as S,xe as a,me as r};
