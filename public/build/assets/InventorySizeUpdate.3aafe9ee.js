import{_ as y,a5 as N,a0 as v,a3 as C,a2 as J,a9 as w,r as a,o,J as z,L as I,N as r,M as V,a as c,b as n,w as l,W as _,X as S,c as f,d}from"./app.9dc34ef4.js";const B={components:{JetLabel:N,JetButton:v,JetCheckbox:C,JetInput:J,SelectBox:w},props:{inventory:Object,sizes:Array},data(){return{sizeData:{autosize:!1,autosizeSize:null,recentSizes:[]},autosizedNotice:{wasAutosized:!0,message:null},selectedSize:this.sizes.find(e=>e.id==this.inventory.size_id),form:this.$inertia.form({size_id:this.inventory.size_id})}},computed:{nextSize(){if(this.selectedSize.next_size_id)return this.sizes.find(e=>e.id==this.selectedSize.next_size_id)},autosizeLabel(){return this.sizeData.autosizeSize?"Autosize to "+this.sizeData.autosizeSize.name:"Autosize"}},mounted(){if(localStorage.getItem("sizeData")){try{this.sizeData=JSON.parse(localStorage.getItem("sizeData"))}catch{localStorage.removeItem("sizeData")}this.sizeData.autosize&&this.sizeData.autosizeSize&&this.inventory.id!=localStorage.lastInventoryId&&(localStorage.lastProductId==this.inventory.product_id?new Promise((e,i)=>{this.selectedSize=this.sizeData.autosizeSize,e()}).then(()=>{this.autosizedNotice={wasAutosized:!0,message:"Autosized to "+this.selectedSize.name}}):(this.sizeData.autosize=!1,this.autosizedNotice={wasAutosized:!1,message:"New Product. Size was not autosized"}))}},beforeUnmount(){localStorage.lastProductId=this.inventory.product_id},watch:{sizeData:{handler(e){localStorage.setItem("sizeData",JSON.stringify(e))},deep:!0},selectedSize(e){!this.sizeData.recentSizes.map(i=>i.id).includes(e.id)&&e&&(this.sizeData.recentSizes.length>=3&&this.sizeData.recentSizes.shift(),this.sizeData.recentSizes.push(e)),e&&(this.form.size_id=e.id,this.updateSize()),this.autosizedNotice.message=null}},methods:{assignNextSize(){this.selectedSize=this.nextSize},currentSize(e){return this.selectedSize.id==e.id},updateSize(){this.form.patch(route("inventory.update",this.inventory))}}},A={class:"py-4 grid gap-3"},L=c("h2",{class:"text-xl"},"Plant Size",-1),j={class:"flex items-center space-x-4"},P=d("Next Size Up"),U={class:"flex items-center space-x-2"},O=d("Change to: "),E={class:"flex items-center space-x-2"},F={class:"flex items-center space-x-2"};function M(e,i,x,T,t,u){const p=a("select-box"),g=a("jet-button"),D=a("jet-label"),m=a("JetButton"),b=a("JetLabel"),k=a("JetCheckbox");return o(),z("div",A,[L,t.autosizedNotice.message?(o(),z("p",{key:0,class:I([t.autosizedNotice.wasAutosized?"text-green-600":"text-red-500"])},r(t.autosizedNotice.message),3)):V("",!0),c("div",j,[n(p,{class:"w-full flex items-center space-x-2",id:"size",items:x.sizes,selectedItem:t.selectedSize,modelValue:t.selectedSize,"onUpdate:modelValue":i[0]||(i[0]=s=>t.selectedSize=s),showLabel:!1},null,8,["items","selectedItem","modelValue"]),n(g,{disabled:!u.nextSize,onClick:u.assignNextSize,class:"max-w-xs flex-shrink-0"},{default:l(()=>[P]),_:1},8,["disabled","onClick"])]),c("div",U,[n(D,{class:"text-lg"},{default:l(()=>[O]),_:1}),(o(!0),z(_,null,S(t.sizeData.recentSizes,s=>(o(),f(m,{key:s.id,disabled:this.selectedSize.id==s.id,onClick:h=>t.selectedSize=s},{default:l(()=>[d(r(s.name),1)]),_:2},1032,["disabled","onClick"]))),128))]),c("div",E,[n(b,{for:"autosize",class:"text-lg"},{default:l(()=>[d(r(u.autosizeLabel),1)]),_:1}),n(k,{checked:t.sizeData.autosize,modelValue:t.sizeData.autosize,"onUpdate:modelValue":i[1]||(i[1]=s=>t.sizeData.autosize=s)},null,8,["checked","modelValue"])]),c("div",F,[(o(!0),z(_,null,S(t.sizeData.recentSizes,s=>{var h;return o(),f(m,{key:s.id+"recent",onClick:W=>t.sizeData.autosizeSize=s,disabled:((h=t.sizeData.autosizeSize)==null?void 0:h.id)==s.id},{default:l(()=>[d(r(s.name),1)]),_:2},1032,["onClick","disabled"])}),128))])])}var q=y(B,[["render",M]]);export{q as default};
