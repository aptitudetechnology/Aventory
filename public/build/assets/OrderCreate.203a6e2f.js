import{S as j}from"./SectionTitle.6e9e4bb1.js";import{J as M}from"./Button.9edbaae6.js";import{J as q}from"./FormSection.532e715f.js";import{J as Q}from"./Input.3e59ac9d.js";import{J as N}from"./Checkbox.28af1d52.js";import{J as B}from"./InputError.871a3d35.js";import{J as O}from"./Label.98bc58ad.js";import{T as U}from"./TextAreaInput.8e8fc994.js";import{S as T}from"./SelectBox.4394748c.js";import{S as D}from"./SearchSelectBox.235a8bdb.js";import{M as A}from"./Modal.a8ddeb0e.js";import E from"./CreateCustomerForm.5a2c4bb2.js";import H from"./QuoteHoldInventoryCheckmark.02cd74cd.js";import{R as F,r as l,o as u,t as b,b as o,w as a,d as p,x as _,a as m,A as P,B as z,u as h,v as x,c as L}from"./app.c6d51eb6.js";import R from"./CompanyOpenOrders.02d6707a.js";import{_ as G}from"./plugin-vue_export-helper.21dcd24c.js";import"./dom.esm.fa0fef86.js";import"./calculate-active-index.esm.611fafbc.js";import"./use-resolve-button-type.esm.4623ef0e.js";import"./XCircleIcon.7dffa179.js";import"./ActionMessage.beea7ba5.js";import"./SecondaryButton.d03b45d1.js";import"./switch.esm.341fd662.js";import"./description.esm.62a21e39.js";import"./label.esm.45c99648.js";import"./DetailsSection.5647e5ed.js";import"./EmptyState.299ed1ff.js";import"./ButtonLink.a3a01f7d.js";import"./LoadingState.36d08ac8.js";const K={components:{JetSectionTitle:j,JetButton:M,JetFormSection:q,JetInput:Q,JetCheckbox:N,JetInputError:B,JetLabel:O,SelectBox:T,SearchSelectBox:D,TextAreaInput:U,Modal:A,CreateCustomerForm:E,QuoteHoldInventoryCheckmark:H,CompanyOpenOrders:R},props:{customers:{type:Array,required:!0},isQuote:{type:Boolean,default:!1}},data(){return{creatingCustomer:!1,customerName:"",customerContacts:[],teamMembers:this.$page.props.teamMembers,orderCustomer:null,contact:null,teamMember:this.$page.props.teamMembers.find(t=>t.id===this.$page.props.user.id),order:this.$inertia.form({_method:"POST",date:new Date().toISOString().slice(0,-14),quote_expires:new Date(new Date().getTime()+2592e6).toISOString().slice(0,-14),hold_inventory:!1,notes:"",items:[],customer_id:null,contact_id:null,team_member_id:this.$page.props.user.id,is_taxable:!0})}},watch:{orderCustomer(t){t?(this.order.customer_id=t.id,this.customerContacts=t.contacts?t.contacts:[],this.contact=null,this.order.is_taxable=t.is_taxable):(this.order.customer_id=null,this.contact=null)},contact(t){t?this.order.contact_id=t.id:this.order.contact_id=null},teamMember(t){t?this.order.team_member_id=t.id:this.order.team_member_id=null}},methods:{createOrder(){this.isQuote?this.order.post(route("quotes.store")):this.order.post(route("orders.store"))},updateCustomer(t){this.orderCustomer=this.customers.find(s=>s.id==t)},addCustomer(t){this.customerName=t,this.creatingCustomer=!0},createdCustomer(t){F.Inertia.reload(),this.customers.push(t),this.updateCustomer(t.id),this.creatingCustomer=!1}}},W={class:"xl:flex items-start xl:space-x-6 space-y-6 xl:space-y-0"},X={class:"col-span-6 grid gap-6"},Y={class:"grid sm:grid-cols-2 lg:grid-cols-5 gap-4 2xl:gap-x-20 lg:gap-y-8"},Z={class:"col-span-1 lg:col-span-3 grid gap-4 lg:grid-cols-2"},$={class:""},ee={class:"col-span-1 lg:col-span-2 grid grid-cols-2 gap-4"},te={key:0},oe={class:"sm:col-span-2 lg:col-span-5 sm:flex"},se={class:"form-control sm:w-1/4 mb-6 sm:mb-0 sm:mt-4"},re={class:"label cursor-pointer"},le=m("span",{class:"label-text"},"Taxable",-1),me={class:"sm:w-3/4 sm:ml-4"};function ne(t,s,n,ie,e,c){const C=l("create-customer-form"),V=l("modal"),v=l("search-select-box"),i=l("jet-input-error"),f=l("select-box"),d=l("jet-label"),g=l("jet-input"),y=l("QuoteHoldInventoryCheckmark"),k=l("jet-checkbox"),S=l("text-area-input"),w=l("jet-button"),I=l("jet-form-section"),J=l("company-open-orders");return u(),b("div",W,[o(I,{onSubmitted:c.createOrder,class:"xl:w-3/4"},{title:a(()=>[p("Create "+_(n.isQuote?"Quote":"Order"),1)]),description:a(()=>[p(" Create a new customer "+_(n.isQuote?"quote":"order")+". ",1)]),form:a(()=>[m("div",X,[m("div",Y,[m("div",Z,[m("div",null,[o(V,{show:e.creatingCustomer,onClose:s[0]||(s[0]=r=>e.creatingCustomer=!1)},{default:a(()=>[o(C,{onCreated:c.createdCustomer,redirect:!1,customerName:e.customerName},null,8,["onCreated","customerName"])]),_:1},8,["show"]),o(v,{labelValue:"Customer",items:n.customers,selectedItem:e.orderCustomer,onUpdate:c.updateCustomer,onAdd:c.addCustomer},null,8,["items","selectedItem","onUpdate","onAdd"]),o(i,{message:e.order.errors.customer_id,class:"mt-2"},null,8,["message"])]),P(m("div",null,[o(f,{labelValue:"Customer Contact",items:e.customerContacts,modelValue:e.contact,"onUpdate:modelValue":s[1]||(s[1]=r=>e.contact=r),selectedItem:e.contact},null,8,["items","modelValue","selectedItem"]),o(i,{message:e.order.errors.contact_id,class:"mt-2"},null,8,["message"])],512),[[z,e.orderCustomer&&e.customerContacts.length]]),m("div",$,[o(f,{labelValue:"Sales Person",items:e.teamMembers,selectedItem:e.teamMember,modelValue:e.teamMember,"onUpdate:modelValue":s[2]||(s[2]=r=>e.teamMember=r)},null,8,["items","selectedItem","modelValue"]),o(i,{message:e.order.errors.team_member_id,class:"mt-2"},null,8,["message"])])]),m("div",ee,[m("div",{class:h(n.isQuote?"":"col-span-2 justify-self-end")},[o(d,{for:"date",value:"Date"}),o(g,{id:"date",type:"date",class:"block w-full",modelValue:e.order.date,"onUpdate:modelValue":s[3]||(s[3]=r=>e.order.date=r),required:""},null,8,["modelValue"]),o(i,{message:e.order.errors.date,class:"mt-2"},null,8,["message"])],2),n.isQuote?(u(),b("div",te,[o(d,{for:"quote_expires",value:"Expire Date"}),o(g,{id:"quote_expires",type:"date",class:"block w-full",modelValue:e.order.quote_expires,"onUpdate:modelValue":s[4]||(s[4]=r=>e.order.quote_expires=r),required:""},null,8,["modelValue"]),o(i,{message:e.order.errors.quote_expires,class:"mt-2"},null,8,["message"])])):x("",!0),n.isQuote?(u(),L(y,{key:1,modelValue:e.order.hold_inventory,"onUpdate:modelValue":s[5]||(s[5]=r=>e.order.hold_inventory=r),errorMessage:e.order.errors.hold_inventory},null,8,["modelValue","errorMessage"])):x("",!0)]),m("div",oe,[m("div",se,[m("label",re,[le,o(k,{class:"mr-2",checked:e.order.is_taxable,modelValue:e.order.is_taxable,"onUpdate:modelValue":s[6]||(s[6]=r=>e.order.is_taxable=r)},null,8,["checked","modelValue"])])]),m("div",me,[o(d,{for:"notes",value:"Notes"}),o(S,{id:"notes",type:"notes",class:"block w-full",modelValue:e.order.notes,"onUpdate:modelValue":s[7]||(s[7]=r=>e.order.notes=r)},null,8,["modelValue"]),o(i,{message:e.order.errors.notes,class:"mt-2"},null,8,["message"])])])])])]),actions:a(()=>[o(w,{type:"submit",class:h({"opacity-25":e.order.processing}),disabled:e.order.processing},{default:a(()=>[p("New "+_(n.isQuote?"quote":"order"),1)]),_:1},8,["class","disabled"])]),_:1},8,["onSubmitted"]),o(J,{customer:e.orderCustomer,class:"xl:w-1/4"},null,8,["customer"])])}var De=G(K,[["render",ne]]);export{De as default};
